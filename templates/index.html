<!DOCTYPE html>
<html>
<head>
    <title>Generador de Tareas IA</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script>
        // Toggle simple de secciones
        function toggleSection(id) {
            const section = document.getElementById(id);
            section.classList.toggle("hidden");
        }
    </script>
</head>
<body>
    <h1> Generador de Descripci贸n de Tareas</h1>

    <form action="/generate" method="post">
        <label>Motivo del Ticket:</label><br>
        <textarea name="motivo" rows="3" required>{{ motivo or '' }}</textarea><br><br>

        <label>Listado de Bases (opcional):</label><br>
        <textarea name="bases" rows="3">{{ bases or '' }}</textarea><br><br>

        <!--  PROMPT BASE (colapsable) -->
        <button type="button" class="toggle-btn" onclick="toggleSection('prompt-section')">
            З Prompt Base (mostrar/ocultar)
        </button>
        <div id="prompt-section" class="collapsible hidden">
            <small>Puedes usar <code>{motivo}</code> y <code>{bases}</code> como variables.</small><br>
            <textarea name="prompt" rows="8" required>{{ prompt or
"""
asume el rol de un desarrollador , y genera una descripci贸n de tarea a partir de esta informaci贸n:
- Motivo del ticket: {motivo}
- Bases involucradas: {bases}

Incluye los siguientes campos:
- Objetivo
- Descripci贸n ( genera 1 parrafo corto)
- Entregables (maximo 3)
- DOR (definition of ready) (1 general)

Que cada punto sea conciso y abordable.
No incluyas texto introductorio, solo lo que se pide.

""" }}</textarea><br><br>
        </div>

        <!--  CONFIGURACIN IA (colapsable) -->
        <button type="button" class="toggle-btn" onclick="toggleSection('config-section')">
            锔 Configuraci贸n de la IA (mostrar/ocultar)
        </button>
        <div id="config-section" class="collapsible hidden">
            <label>Modelo Gemini:</label>
            <select name="modelo" required>
                <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
            </select><br><br>

            <label>Temperatura:</label>
            <input type="number" step="0.1" name="temperatura" value="0.7" min="0" max="1"><br><br>

            <label>k (m谩x tokens de salida):</label>
            <input type="number" name="k" value="512" min="1"><br><br>
        </div>

        <button type="submit"> Generar Descripci贸n</button>
    </form>

    {% if description %}
    <div class="markdown-output">
        <h2>Ь Resultado</h2>
        <div>{{ description | safe }}</div>
    </div>
    {% endif %}
</body>
</html>
